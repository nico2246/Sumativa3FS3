
-- CREACIÓN DE TABLAS Y RELACIONES


-- 1.ROL
CREATE TABLE ROL (
    ID_ROL NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_ROL VARCHAR2(50) NOT NULL UNIQUE
);

-- 2.USUARIO
CREATE TABLE USUARIO (
    ID_USUARIO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    CORREO VARCHAR2(100) NOT NULL UNIQUE,
    CONTRASENA VARCHAR2(100) NOT NULL,
    ID_ROL NUMBER NOT NULL,
    CONSTRAINT FK_USUARIO_ROL FOREIGN KEY (ID_ROL)
        REFERENCES ROL(ID_ROL)
);

-- 3.LABORATORIO
CREATE TABLE LABORATORIO (
    ID_LAB NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE VARCHAR2(120) NOT NULL UNIQUE,
    DIRECCION VARCHAR2(200),
    TELEFONO VARCHAR2(30)
);

-- 4.ASIGNACION_ANALISIS
CREATE TABLE ASIGNACION_ANALISIS (
    ID_ASIGNACION NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_ANALISIS VARCHAR2(120) NOT NULL,
    FECHA_ASIGNACION DATE DEFAULT SYSDATE NOT NULL,
    ID_LAB NUMBER NOT NULL,
    CONSTRAINT FK_ASIGNACION_LAB FOREIGN KEY (ID_LAB)
        REFERENCES LABORATORIO(ID_LAB)
);


COMMIT;





-- ROL
INSERT INTO ROL (NOMBRE_ROL) VALUES ('ADMIN');
INSERT INTO ROL (NOMBRE_ROL) VALUES ('TECNICO');
INSERT INTO ROL (NOMBRE_ROL) VALUES ('ASISTENTE');

-- USUARIO
INSERT INTO USUARIO (NOMBRE, CORREO, CONTRASENA, ID_ROL)
VALUES ('Nicolás Escobar', 'admin@demo.cl', '1234', 1);
INSERT INTO USUARIO (NOMBRE, CORREO, CONTRASENA, ID_ROL)
VALUES ('Laura Rojas', 'tecnico1@demo.cl', 'abcd', 2);
INSERT INTO USUARIO (NOMBRE, CORREO, CONTRASENA, ID_ROL)
VALUES ('Pedro González', 'asistente@demo.cl', 'qwerty', 3);

-- LABORATORIO
INSERT INTO LABORATORIO (NOMBRE, DIRECCION, TELEFONO)
VALUES ('Laboratorio Andes', 'Av. Siempre Viva 123', '+56 9 1111 1111');
INSERT INTO LABORATORIO (NOMBRE, DIRECCION, TELEFONO)
VALUES ('BioSalud', 'Calle Central 45', '+56 9 2222 2222');
INSERT INTO LABORATORIO (NOMBRE, DIRECCION, TELEFONO)
VALUES ('CliniLab', 'Pasaje Norte 987', '+56 9 3333 3333');

-- ASIGNACION_ANALISIS
INSERT INTO ASIGNACION_ANALISIS (NOMBRE_ANALISIS, FECHA_ASIGNACION, ID_LAB)
VALUES ('Hemograma', SYSDATE - 1, 1);
INSERT INTO ASIGNACION_ANALISIS (NOMBRE_ANALISIS, FECHA_ASIGNACION, ID_LAB)
VALUES ('Perfil Lipídico', SYSDATE - 2, 2);
INSERT INTO ASIGNACION_ANALISIS (NOMBRE_ANALISIS, FECHA_ASIGNACION, ID_LAB)
VALUES ('Examen Orina', SYSDATE - 3, 3);


COMMIT;


SELECT * FROM USUARIO;

SELECT * FROM LABORATORIO;

SELECT * FROM ASIGNACION_ANALISIS;


